{"version":3,"sources":["src/framework/utils.js","src/framework/extras.js","src/framework/observable.js","src/framework/dispatcher.js","src/framework/state/createComputed.js","src/framework/state/createEffect.js","src/framework/state/createProxy.js","src/framework/state/createState.js","src/framework/state/createValue.js","src/framework/state/produce.js","src/framework/state/index.js","src/framework/patch.js","src/framework/hooks.js","src/framework/attrs.js","src/framework/render.js","src/framework/index.js","src/index2.js","C:/Users/dane/AppData/Roaming/npm/node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["isPrimitive","val","Object","isObject","isCallable","f","pipe","fns","arg","reduce","acc","fn","empty","o","constructor","copy","assign","length","keys","filter","object","key","map","initial","each","forEach","logger","log","args","push","curry","arguments","apply","bind","arr","cacheArr","result","a","flatten","v","flat","any","$not","x","$and","cond","$or","$if","y","$eq","$eqw","$add","$sub","$multiply","$divide","$pow","$mod","$lt","$gt","$lte","$gte","createObservable","emitOnEqualValues","dirty","observers","valueCache","update","newObserverList","position","subscribe","item","newHandler","message","msg","observer","run","current","exprUpdate","exprCleanup_$","createUpdateCycle","setTimeout","dispatcher","renderInProgress","registerDep","subscribeToDep","renderExpression","expr","exprCache","expreCache","registerExpression","cleanup","console","cancel","resolve","require","flattenUnary","createComputed","deps","computedFn","flattenDeps","cache","clearCache","$state","createEffect","effectFn","destroy","depsCache","destroyEffect","runEffect","applyToObjectKeys","proxy","k","mutatorList","pop","shift","unshift","splice","reverse","fill","sort","subProxy","subarray","prop","subproxies","handler","mutable","hasOwnProperty","createProxy","stateGuard","state","record","isArray","Array","unsubscribe","defineMutatorFn","len","value","prototype","mutators","defineProperties","Proxy","Function","get","target","parent","p","isRenderMode","set","deleteProperty","thisArg","freeze","stateUpdate","options","ERR_STATE_UPDATE","stateDefaults","createState","stateProxy","getState","setState","Error","createValue","produce","first","second","patch","$parent","$new","$old","newList","oldList","patchManyToMany","patchManyToOne","patchOneToMany","patchOneToOne","replaceChild","appendChild","$n","insertBefore","removeChild","$o","newLength","oldLength","min","Math","max","i","addNew","method","useComputed","useValue","useState","useEffect","subscribeToUpdates","subscribeToDestroy","useRef","eventHandler","updateAttr","$el","removeAttribute","style","setAttribute","createAttrs","attrs","updates","entries","match","arraySpreadProxy","window","objectSpreadProxy","nulled","newState","call","extendAttrs","xs","attrSpreadExpression","renderNode","vNode","type","createEmptyNode","createTextNode","createExpression","createFragment","tagName","createComponent","createElement","document","text","resultCache","elementCache","updatesCache","destroyCache","cancelUpdate","updateDestroyer","destroyUpdate","subscribeToDestroyOb","subscribeToCleanup","$parentUpdate","that","element","vNodes","$elements","destroyHandlers","children","child","destroyHandler","component","unsubscribeList","updateObservableMessage","updateObservableSubscribe","destroyObservableMessage","d","updateDom","connectState","env","h","mount","hdom","$target","Wrapper","border","padding","MaybeWrap","wrap","UxInput","name","label","placeholder","oninput","rest","init","setInit","input","e","background","Timer","counter","setCounter","increment","counterDisplay","reversed","String","split","join","sum","Number","interval","setInterval","title","clearInterval","Main","inputRef","count","color","showColors","updateState","shouldWrap","setWrap","toggleColorOptions","checked","toggleWrapper","incrementClicks","focus","updateName","selectColor","buttonStyle","colors","time","body","timeEnd","vnode","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","dispose","checkedAssets","assetsToAccept","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","clear","hmrApply","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","error","stack","overlay","createErrorOverlay","getElementById","remove","stackTrace","innerText","innerHTML","getParents","modules","parents","dep","concat","cached","some","cb"],"mappings":"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","file":"index2.943df8ae.js","sourceRoot":"..","sourcesContent":["export const isPrimitive = (val) => Object(val) !== val;\r\nexport const isObject = (val) => Object(val) === val;\r\nexport const isCallable = (f) => typeof f === 'function';\r\nexport const pipe = (...fns) => arg => fns.reduce((acc, fn) => fn(acc), arg);\r\nexport const empty = (o) => o.constructor();\r\nexport const copy = (o) => Object.assign(o.constructor(), o);\r\nexport const length = (o) => Object.keys(o).length;\r\nexport const filter = (object, fn) => Object.keys(object).reduce(\r\n  (acc, key) => {\r\n    if(fn(object[key], key, object)){\r\n      acc[key] = object[key];\r\n    }\r\n    return acc;\r\n  }, {}\r\n);\r\nexport const map = (object, fn) => Object.keys(object).reduce(\r\n  (acc, key) => {\r\n    acc[key] = fn(object[key], key, object);\r\n    return acc;\r\n  }, {}\r\n);\r\nexport const reduce = (object, fn, initial) => Object.keys(object).reduce(\r\n  (acc, key) => {\r\n    acc[key] = fn(object[key], key, object);\r\n    return acc;\r\n  }, initial\r\n);\r\nexport const each = (object, fn) =>  Object.keys(object).forEach(\r\n  (key) => {\r\n    fn(object[key], key, object);\r\n  }\r\n);\r\nexport const logger = (log = []) => (...args) => {\r\n  if (args.length){\r\n    log.push(\r\n      args.length > 1\r\n        ? args\r\n        : args[0]\r\n    )\r\n  } else {\r\n    return log;\r\n  }\r\n}\r\n\r\nexport const curry = (f) => {\r\n  return (...arguments) => {\r\n    if (arguments.length == f.length) {\r\n      // If arguments passed is sufficient then return value = f(arguments)\r\n      return (f.apply(null, arguments))\r\n    }\r\n    return curry(f.bind(null, ...arguments))\r\n  }\r\n}\r\n","import { isCallable } from './utils'\r\nconst map = (arr, fn) => {\r\n  let cacheArr, result;\r\n  return () => {\r\n    const a = arr();\r\n    if (a !== cacheArr){\r\n      result = arr.map(fn);\r\n      cacheArr = a;\r\n    }\r\n    return result;\r\n  };\r\n};\r\n\r\nexport const flatten = (v, args) => typeof v === 'function' ? v.apply(null, args) : v;\r\nconst flat = (fn) => (...args) => {\r\n  return args.any(isCallable)\r\n    ? () => fn(...args.map(flatten))\r\n    : fn(...args)\r\n}\r\n\r\nexport const $not = (x) => typeof x === 'function'\r\n  ? (...args) => !flatten(x, args)\r\n  : !x;\r\nexport const $and = (cond, x) => typeof cond === 'function'\r\n  ? (...args) => cond() && flatten(x, args)\r\n  : cond && x;\r\nexport const $or = (cond, x) => typeof cond === 'function'\r\n  ? (...args) => cond() || flatten(x, args)\r\n  : cond || x;\r\nexport const $if = (cond, x, y) => typeof cond === 'function'\r\n  ? (...args) => cond() ? flatten(x, args) : flatten(y, args)\r\n  : cond ? x : y;\r\n\r\nexport const $eq = flat((x, y) => x === y);\r\nexport const $eqw = flat((x, y) => x == y);\r\n\r\nexport const $add = flat((x, y) => x + y);\r\nexport const $sub = flat((x, y) => x - y);\r\nexport const $multiply = flat((x, y) => x * y);\r\nexport const $divide = flat((x, y) => x / y);\r\nexport const $pow = flat((x, y) => x ** y);\r\nexport const $mod = flat((x, y) => x % y);\r\nexport const $lt = flat((x, y) => x < y);\r\nexport const $gt = flat((x, y) => x > y);\r\nexport const $lte = flat((x, y) => x <= y);\r\nexport const $gte = flat((x, y) => x >= y);\r\n\r\n// export const $add = (x, y) => () => flatten(x) + flatten(y);\r\n// export const $sub = (x, y) => () => flatten(x) - flatten(y);\r\n// export const $multiply = (x, y) => () => flatten(x) * flatten(y);\r\n// export const $divide = (x, y) => () => flatten(x) / flatten(y);\r\n// export const $pow = (x, y) => () => flatten(x) ** flatten(y);\r\n// export const $mod = (x, y) => () => flatten(x) % flatten(y);\r\n\r\n// const $if2 = (x, y, z) => {\r\n//   let cache1, cache2, result;\r\n//   returnf (...args) => {\r\n//     const condition = flatten(x, args);\r\n//     if (condition) {\r\n//       result = flatten(y, args);\r\n//       if result !== void 0;\r\n//         cache1 = result;\r\n//     } else {\r\n//       result = flatten(z, args);\r\n//       if result !== void 0;\r\n//         cache2 = result;\r\n//     }\r\n//     return result;\r\n//   };\r\n// };\r\n//\r\n// const $if3 = (condition, ...outcomes) => {\r\n//   let result, cache = [];\r\n//   return (...args) => {\r\n//     const outcome = Number(!flatten(x, args));\r\n//     result = flatten(outcomes[outcome], args);\r\n//     if (result !== void 0) {\r\n//       cache[outcome] = result;\r\n//     }\r\n//     return result;\r\n//   };\r\n// };\r\n//\r\n// const $if4 = (condition, ...outcomes) => {\r\n//   let result, cache = [];\r\n//   return (...args) => {\r\n//     const outcome = Number(!flatten(x, args));\r\n//     result = outcomes[outcome];\r\n//     cache[outcome] = result;\r\n//     return flatten(result, args);\r\n//   };\r\n// };\r\n\r\n// const $if = (condition, x, y) => (...args) => flatten(flatten(condition ? x : y, args));\r\n\r\n\r\n// $if(false, 1, $if(2, 3, 4));\r\n\r\n// { $.if(\r\n//   state.someCondition,\r\n//   <div>No data found.</div>,\r\n//   <Component2 user={ user } />\r\n// ) }\r\n//\r\n// { (...args) => flatten(state.someCondition, args)\r\n//   ?  <div>No data found.</div>\r\n//   : <Component2 user={ user } />\r\n// }\r\n\r\n\r\n\r\n// reactiveArray.map( reactiveItem => <div attr={reactiveItem.attr}>{ reactiveItem.content }</div> )\r\n//\r\n// const renderMethod = method => function (fn) {\r\n//     let arrayData;\r\n//     let cache;\r\n//     return () => {\r\n//       const newArrayData = this.arrayProxy();\r\n//       if (newArrayData !== arrayData) {\r\n//         cache = method(this.arrayProxy, fn);\r\n//       }\r\n//       return cache;\r\n//   };\r\n// };\r\n//\r\n// const map = function (fn) {\r\n//     let arrayData;\r\n//     let cache;\r\n//     return () => {\r\n//       const newArrayData = this.arrayProxy();\r\n//       if (newArrayData !== arrayData) {\r\n//         cache = map(this.arrayProxy, fn);\r\n//       }\r\n//       return cache;\r\n//   };\r\n// };\r\n//\r\n//\r\n// $observable.map() =>\r\n// () => {\r\n//   return ()\r\n// }\r\n//\r\n// const renderMethods = Object.freeze({\r\n//     map: renderMethod(map),\r\n//     filter: renderMethod(filter),\r\n//     reduce: renderMethod(reduce)\r\n// });\r\n//\r\n// const bindRenderMethods = (arrayProxy) => {\r\n//   Object.create(renderMethods, {\r\n//     arrayProxy: { value: arrayProxy }\r\n//   });\r\n// };\r\n","export const createObservable = (emitOnEqualValues = true) => {\n  let dirty = false;\n  let observers = [];\n  let valueCache;\n\n  function update (newObserverList) {\n    this.position = newObserverList.length;\n    newObserverList.push(this);\n  }\n\n  const subscribe = (fn) => {\n    const item = { fn, update, position: void 0 };\n    item.update(observers);\n\n    return (newHandler) => {\n      observers[item.position] = newHandler || false;\n      if (!newHandler) dirty = true;\n    }\n  };\n\n  const message = ( msg ) => {\n    if (emitOnEqualValues || msg !== valueCache) {\n      if (dirty) {\n        let newObserverList = [];\n        for (const observer of observers) {\n          if (observer) {\n            observer.fn( msg );\n            observer.update(newObserverList)\n          }\n        }\n        observers = newObserverList;\n        dirty = false;\n      } else {\n        observers.forEach(\n          (o) => {\n            return o.fn( msg )\n          }\n        );\n      }\n    }\n\t};\n  return [\n    message,\n    subscribe\n  ];\n}\n","import { createObservable } from './observable';\n\nlet run, subscribe, current, exprUpdate, exprCleanup_$;\nconst createUpdateCycle = () => {\n  [ run, subscribe ] = createObservable();\n  setTimeout(() => {\n    run();\n    run = subscribe = null;\n  }, 0);\n}\nexport const dispatcher = {\n  renderInProgress: false,\n  registerDep (subscribeToDep) {\n    exprCleanup_$ && exprCleanup_$(subscribeToDep(exprUpdate));\n  },\n  renderExpression (expr) {\n    let exprCache = exprUpdate;\n    exprUpdate = expr;\n    this.renderInProgress = true;\n    exprUpdate(); // not sure about the second... or the first!\n    this.renderInProgress = false;\n    return dispatcher;\n    exprUpdate = expreCache;\n  },\n  registerExpression (update, cleanup) {\n    console.log(\"====RegisterExpression====\", [ update, cleanup ])\n    let cancel = false;\n    const resolve = update.bind(() => { // resolve never gets called too!!!!! [2]\n      console.log(\"====Resolve====\")\n      cancel = false;\n    });\n    exprCleanup_$ = cleanup;\n    exprUpdate = () => {\n      console.log(\"============================================================expreUpdate====\")\n      // ok, this is why this && this() never works in createExpression,\n      // this code never gets called!!!!!!!!! [1]\n      run || createUpdateCycle();\n      if (!cancel) { // schedule update if not scheduled\n        cancel = subscribe(resolve) // maybe I need to think how to unsubscrie after all\n      }\n    };\n    return dispatcher;\n  }\n};\n","const { flatten } = require('../extras')\r\nconst { map } = require('../utils');\r\nconst { createObservable } = require('../observable');\r\nconst { dispatcher } = require('../dispatcher')\r\n\r\nconst flattenUnary = x => flatten(x);\r\nexport const createComputed = (deps, computedFn) => {\r\n\tconst [ message, subscribe ] = createObservable();\r\n\tconst flattenDeps = map.bind(null, deps, flattenUnary);\r\n\r\n\t// dispatcher\r\n\t// \t.registerExpression(message)\r\n\t// \t.renderExpression(flattenDeps);\r\n\r\n\tlet cache;\r\n\tconst clearCache = () => cache = null;\r\n\tsubscribe(clearCache);\r\n\tconst $state = () => {\r\n\t\tdispatcher.renderInProgress && dispatcher.registerDep(subscribe);\r\n\t\treturn computedFn(flattenDeps());\r\n\t\t// if (cache == null) {\r\n\t\t// \tcache = computedFn(flattenDeps())\r\n\t\t// }\r\n\t\t// return cache\r\n\t};\r\n\treturn {\r\n\t\t$state,\r\n\t\tsubscribe\r\n\t}\r\n};\r\n","const { flatten } = require('../extras');\r\nconst { map } = require('../utils');\r\n// const { createObservable } = require('./observable');\r\n// const { dispatcher } = require('./dispatcher')\r\n\r\nexport const createEffect = (deps, effectFn) => {\r\n\tlet destroy, depsCache;\r\n\r\n  const destroyEffect = () => {\r\n    destroy && destroy(depsCache);\r\n  }\r\n\r\n\tconst runEffect = () => {\r\n\t\tdestroyEffect();\r\n\t\tdepsCache = map(deps, (x) => flatten(x));\r\n\t\tdestroy = effectFn(depsCache);\r\n\t};\r\n\r\n\treturn {\r\n    runEffect,\r\n    destroyEffect\r\n  };\r\n};\r\n","const { isPrimitive, isObject, isCallable, copy, map, empty, each } = require('../utils');\r\nconst { createObservable } = require('../observable');\r\nconst { dispatcher } = require('../dispatcher')\r\n\r\nconst apply = (fn) => fn();\r\nconst applyToObjectKeys = (proxy) => (v, k) => isPrimitive(v) || proxy[k]();\r\nconst mutatorList = { pop: 0, shift: 0, push: 1, unshift: 1, splice: 0, reverse: 0, fill: 0, sort: 0 };\r\n\r\nconst subProxy = (subarray, prop, subproxies, { handler, mutable }) => {\r\n\tif (!subproxies.hasOwnProperty(prop)) {\r\n\t\tsubproxies[prop] = createProxy(subarray, {\r\n\t\t\thandler,\r\n\t\t\tmutable\r\n\t\t});\r\n\t}\r\n\treturn subproxies[prop];\r\n};\r\n\r\nconst stateGuard = (state, { mutable = false } = {}) => {\r\n\tlet dirty = false;\r\n\treturn () => {\r\n\t\tif (mutable && dirty) {\r\n\t\t\treturn state;\r\n\t\t}\r\n\t\tdirty = mutable;\r\n\t\treturn state = copy(state);\r\n\t}\r\n};\r\n\r\nexport const createProxy = (record, { handler, mutable = false } = {}) => {\r\n\tlet proxy,\r\n\t\t\tsubproxies = {},\r\n\t\t\tstate = stateGuard(record, { mutable });\r\n  const isArray = Array.isArray(record);\r\n  const [ message, subscribe ] = createObservable();\r\n  const unsubscribe = handler && subscribe(handler);\r\n\t// handler && console.log({ handler })\r\n\tconst defineMutatorFn = isArray && mutable\r\n\t\t? (len, prop) => ({\r\n\t\t\tvalue: (...args) => {\r\n\t\t\t\tif ( args.length >= len ) record = state();\r\n\t\t\t\treturn Array.prototype[prop].apply(record, args);\r\n\t\t\t}\r\n\t\t})\r\n\t\t: null;\r\n\tconst mutators = isArray && mutable\r\n\t\t? Object.defineProperties({}, map(mutatorList, defineMutatorFn))\r\n\t\t: null;\r\n\treturn proxy = new Proxy(new Function, {\r\n\t\tget: (target, prop, parent) => {\r\n\t\t\tif (record.hasOwnProperty(prop)) {\r\n\t\t\t\tconst p = record[prop];\r\n\t\t\t\treturn isPrimitive(p)\r\n\t\t\t\t\t? dispatcher.isRenderMode\r\n\t\t\t\t\t\t? () => p\r\n\t\t\t\t\t\t: p\r\n\t\t\t\t\t: subProxy(p, prop, subproxies, {\r\n\t\t\t\t\t\tmutable,\r\n\t\t\t\t\t\thandler: (record) => parent[prop] = record\r\n\t\t\t\t\t});\r\n\t\t\t} else if (isArray && mutable && mutators.hasOwnProperty(prop)) {\r\n\t\t\t\treturn mutators[prop];\r\n\t\t\t} else if (record.constructor.prototype.hasOwnProperty(prop)) {\r\n\t\t\t\treturn record.constructor.prototype[prop].bind(record);\r\n\t\t\t}\r\n\t\t},\r\n\t\tset: (target, prop, value) => {\r\n\t\t\tif (!record.hasOwnProperty(prop) || record[prop] !== value) {\r\n\t\t\t\trecord = state();\r\n\t\t\t\trecord[prop] = value;\r\n\t\t\t\t// delete subproxies[prop];\r\n\t\t\t\t// mutable ||\r\n\r\n        message(record);\r\n\t\t\t\t// handler && handler(record);\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tdeleteProperty: (target, prop) => {\r\n\t\t\tif (record.hasOwnProperty(prop)) {\r\n\t\t\t\trecord = state();\r\n\t\t\t\tdelete record[prop];\r\n\t\t\t\tdelete subproxies[prop];\r\n\t\t\t\t// mutable ||\r\n        message(record);\r\n\t\t\t\t// handler && handler(record);\r\n\t\t\t}\r\n\t\t},\r\n\t\tapply: (target, thisArg, args) => {\r\n\r\n\t\t\t// dispatcher.renderInProgress && dispatcher.registerDep(subscribe);\r\n\r\n\t\t\t// if (dispatcher.isRenderMode) {\r\n        // dispatcher.renderTarget.unmountHandlers.push(subscribe(dispatcher.renderTarget.shouldUpdate));\r\n\t\t\t// }\r\n\t\t\tif (!args.length) {\r\n\t\t\t\tObject.freeze(record);\r\n        message(record);\r\n\t\t\t\t// handler && handler(record);\r\n\t\t\t\tif (mutable) {\r\n\t\t\t\t\tstate = stateGuard(record);\r\n\t\t\t\t\tmap(record, applyToObjectKeys(proxy));\r\n\t\t\t\t}\r\n\t\t\t\treturn record;\r\n\t\t\t} else {\r\n\t\t\t\tconst [ stateUpdate, options ] = args;\r\n\t\t\t\tif (isCallable(stateUpdate)) {\r\n\t\t\t\t\tconst p = createProxy(record, { mutable: true });\r\n\t\t\t\t\tstateUpdate(p);\r\n\t\t\t\t\trecord = p();\r\n\t\t\t\t\tstate = stateGuard(record, { mutable });\r\n          message(record);\r\n\t\t\t\t\t// handler && handler(record);\r\n\t\t\t\t\treturn proxy;\r\n\t\t\t\t} else if (isObject(stateUpdate)) {\r\n\t\t\t\t\tconst p = createProxy(record, { mutable: true });\r\n\t\t\t\t\tObject.assign(p, stateUpdate);\r\n\t\t\t\t\trecord = p();\r\n\t\t\t\t\tstate = stateGuard(record, { mutable });\r\n          message(record);\r\n\t\t\t\t\t// handler && handler(record);\r\n\t\t\t\t\treturn proxy;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n};\r\n","import { isPrimitive } from '../utils';\r\nimport { createObservable } from '../observable';\r\nimport { dispatcher } from '../dispatcher';\r\nimport { createProxy } from './createProxy';\r\n\r\nconst ERR_STATE_UPDATE = 'State update argument must either be an Object/Array or an update function.';\r\n\r\nconst stateDefaults = { mutable: false };\r\n\r\nexport const createState = (state = {}, options) => {\r\n\tconst { mutable } = Object.assign({}, stateDefaults, options);\r\n\tconst [ handler, subscribe ] = createObservable(false);\r\n\t// const handler = (stateUpdate) => {\r\n\t// \tif (stateUpdate !== state) {\r\n\t// \t\tstate = stateUpdate;\r\n\t// \t\tmessage(state);\r\n\t// \t}\r\n\t// }\r\n\t// const handler = message;\r\n\tconst stateProxy = createProxy(state, {\r\n\t\t// dispatcher,\r\n\t\thandler, mutable\r\n\t});\r\n\tconst getState = () => stateProxy();\r\n\tconst setState = (stateUpdate) => {\r\n\t\tif (isPrimitive(stateUpdate)) throw new Error(ERR_STATE_UPDATE);\r\n\t\treturn stateProxy(stateUpdate);\r\n\t}\r\n\treturn {\r\n\t\t$state: stateProxy,\r\n\t\tgetState,\r\n\t\tsetState,\r\n\t\tsubscribe\r\n\t};\r\n};\r\n","const { createObservable } = require('../observable');\r\nconst { dispatcher } = require('../dispatcher')\r\n\r\nexport const createValue = (value) => {\r\n\tconst [ message, subscribe ] = createObservable();\r\n\r\n\tconst $state = () => {\r\n\t\tdispatcher.renderInProgress && dispatcher.registerDep(subscribe);\r\n\t\treturn value;\r\n\t};\r\n\tconst setState = (v) => {\r\n\t\tif (typeof v === 'function') {\r\n\t\t\tv = v(value);\r\n\t\t}\r\n\t\tif (value !== v) {\r\n\t\t\tvalue = v;\r\n\t\t\tmessage(v);\r\n\t\t}\r\n\t};\r\n\treturn {\r\n\t\t$state,\r\n\t\tsetState,\r\n\t\tsubscribe\r\n\t};\r\n};\r\n","const { isCallable } = require('../utils');\r\nconst { createProxy } = require('./createProxy');\r\n\r\nexport const produce = (...args) => {\r\n\tconst [ first, second ] = args;\r\n\tif (args.length === 1 && isCallable(first)) {\r\n\t\treturn state => createProxy(state)(first)();\r\n\t} else {\r\n\t\treturn createProxy(first)(second)()\r\n\t}\r\n}\r\n","export { createComputed } from './createComputed';\r\nexport { createEffect } from './createEffect';\r\nexport { createProxy } from './createProxy';\r\nexport { createState } from './createState';\r\nexport { createValue } from './createValue';\r\nexport { produce } from './produce';\r\n\r\n// export default {\r\n//   createComputed,\r\n//   createEffect,\r\n//   createProxy,\r\n//   createState,\r\n//   createValue,\r\n//   produce\r\n// };\r\n","// patch is only used 3 times:\r\n// in mount, createElement and createExpression update\r\n\r\nexport const patch = ($parent, $new, $old) => {\r\n  const newList = Array.isArray($new);\r\n  const oldList = Array.isArray($old);\r\n  ( newList\r\n    ? (oldList ? patchManyToMany : patchManyToOne)\r\n    : (oldList ? patchOneToMany : patchOneToOne)\r\n  )($parent, $new, $old)\r\n};\r\n\r\nconst patchOneToOne = ($parent, $new, $old) => $old\r\n  ? $parent.replaceChild($new, $old)\r\n  : $parent.appendChild($new);\r\n\r\nconst patchManyToOne = ($parent, $new, $old) => $old\r\n  ? ( $new.forEach($n => $parent.insertBefore($n, $old)), $parent.removeChild($old))\r\n  : $new.forEach($n => $parent.appendChild($n));\r\n\r\nconst patchOneToMany = ($parent, $new, $old) => $old\r\n  ? ( $parent.insertBefore($new, $old[0]), $old.forEach($o => $parent.removeChild($o)) )\r\n  : $parent.appendChild($new);\r\n\r\nconst patchManyToMany = ($parent, $new, $old) => {\r\n  const newLength = $new.length;\r\n  const oldLength = $old.length;\r\n  const min = Math.min(newLength, oldLength);\r\n  const max = Math.max(newLength, oldLength);\r\n\r\n  for (let i = 0; i < min; i++) {\r\n    $parent.replaceChild($new[i], $old[i]);\r\n  }\r\n\r\n  if (newLength !== oldLength) {\r\n    const addNew = newLength < oldLength;\r\n    const method = addNew ? 'appendChild' : 'removeChild';\r\n    const target = addNew ? $new : $old;\r\n    for (let i = min; i < max; i++) {\r\n      $parent[method](target[i]);\r\n    }\r\n  }\r\n};\r\n","import { createValue, createState, createComputed, createEffect } from './state/index';\r\n\r\n// export function hook(method, ...args) {\r\n//   console.log({ method, args })\r\n//   const { $state, setState, subscribe } = method(...args);\r\n//   this(subscribe);\r\n//   return [ $state, setState ];\r\n// }\r\n\r\nexport function useComputed(deps, computedFn) {\r\n  const { $state, subscribe } = createComputed(deps, computedFn);\r\n  this(subscribe);\r\n  return $state;\r\n}\r\n\r\nexport function useValue(value) {\r\n  const { $state, setState, subscribe } = createValue(value);\r\n  this(subscribe);\r\n  return [ $state, setState ];\r\n}\r\n\r\nexport function useState(state) {\r\n  const { $state, setState, subscribe } = createState(state);\r\n  this(subscribe);\r\n  return [ $state, setState ];\r\n}\r\n\r\nexport function useEffect(deps, effectFn) {\r\n  const { runEffect, destroyEffect } = createEffect(deps, effectFn);\r\n  deps ? this.subscribeToUpdates(runEffect) : setTimeout(runEffect);\r\n  this.subscribeToDestroy(destroyEffect);\r\n}\r\n\r\nexport function useRef(value) {\r\n  return (...args) => {\r\n    if (args.length) {\r\n      const [ update ] = args;\r\n      value = update;\r\n    }\r\n    return value;\r\n  }\r\n}\r\n","export const eventHandler = /^on[\\w]+/g;\r\n\r\nexport const updateAttr = ($el, k, value) => {\r\n  if (k === 'ref') {\r\n    return void value($el);\r\n  }\r\n  const v = value();\r\n  if (v == null) {\r\n    $el.removeAttribute(k);\r\n  } else {\r\n    switch (k) {\r\n      case 'checked':\r\n      case 'value': {\r\n        $el[k] = v;\r\n        break;\r\n      }\r\n      case 'style': {\r\n        if (typeof v === 'string') {\r\n          $el.style = v;\r\n          break;\r\n        }\r\n        Object.assign($el.style, v);\r\n        break;\r\n      }\r\n      default: {\r\n        $el.setAttribute(k, v);\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nexport const createAttrs = (attrs, $el, updates) => {\r\n  for (const [k, v] of Object.entries(attrs)) {\r\n    if (k.match(eventHandler)) {\r\n      $el[k] = v;\r\n    } else if (typeof v === 'function') {\r\n      const update = updateAttr.bind(null, $el, k, v);\r\n      updates.push(update);\r\n      update();\r\n    } else if (v == null){\r\n      $el.removeAttribute(k);\r\n    } else {\r\n      $el.setAttribute(k, v);\r\n    }\r\n  }\r\n}\r\n\r\nexport const arraySpreadProxy = window.arraySpreadProxy = (state, { handler } = {}) => {\r\n  \r\n}\r\n\r\n// if parent expression create destroy\r\nexport const objectSpreadProxy = window.objectSpreadProxy = (state, { handler } = {}) => {\r\n  let nulled = true;\r\n  const proxy = new Proxy(state, {\r\n    get: (target, prop, proxy) => {\r\n      if (nulled) return null; // idea: if callibe intead of null return fn that removes attr and unsubscribes!!!!! :)\r\n      const value = state[prop];\r\n      if (value == null) {\r\n        // if value was reactive (fn) => unsubscribe\r\n        delete state[prop];\r\n      }\r\n      return value;\r\n    }\r\n  });\r\n  return (...args) => {\r\n    const newState = Object.assign.call(null, {}, ...args);\r\n    nulled = true;\r\n    Object.assign(state, proxy, newState);\r\n    nulled = false;\r\n    handler({ ...proxy});\r\n    return state;\r\n  };\r\n  // return update;\r\n  // return [ proxy, update ];\r\n};\r\n\r\n// const attrSpreadExpression = (xs) => {\r\n//   let spreadCache = {};\r\n//   const update = () => {\r\n//     const spread = Object.assgin.apply(null, [{}, ...xs])\r\n//   }\r\n// }\r\n//\r\nexport const extendAttrs = (...xs) => xs.any(isCallable)\r\n  ? attrSpreadExpression(xs)\r\n  : Object.assign.apply(null, xs)\r\n\r\n// staticAttr=\"1\"\r\n// dynamicAttr={ x } // x = () =>\r\n// {...asd} // asd = {}\r\n// {...bsd} // bsd = () =>\r\n","import { dispatcher } from './dispatcher';\nimport { patch } from './patch';\n// import { createValue, createState, createComputed } from './state/index';\nimport { createObservable } from './observable';\nimport { useEffect, useValue, useState, useComputed, useRef } from './hooks';\nimport { eventHandler, createAttrs, objectSpreadProxy } from './attrs';\n\nexport const renderNode = (vNode) => {\n  const type = typeof vNode;\n  if (type === 'boolean' || vNode == null) {\n    return createEmptyNode();\n  } else if (type === 'string' || type === 'number') {\n    return createTextNode(vNode);\n  } else if (type === 'function') {\n    return createExpression(vNode);\n  } else if (Array.isArray(vNode)) {\n    return createFragment(vNode);\n  } else if (typeof vNode.tagName === 'function'){\n    return createComponent(vNode);\n  }\n  return createElement(vNode);\n}\n\nconst createEmptyNode = () => [ document.createTextNode(''), false ]\n\nconst createTextNode = (text) => [ document.createTextNode(text), false ];\n\nconst createExpression = (fn) => {\n  let $parent, resultCache, elementCache,\n      updatesCache, destroyCache, cancelUpdate = false;\n\n  // dispatcher.render() -> setCurrent renderTarget\n  const destroy = () => {\n    cancelUpdate && cancelUpdate(); // if called during an pending update, cancel it!\n    destroyCache && destroyCache(); // TODO: This might need to be removed!\n    cleanup();\n    // instance.unsubscribeList.forEach(f => f());\n  };\n\n  const updateDestroyer = (destroyUpdate) => {\n    destroyCache = (destroyCache ? subscribeToDestroyOb : destroyUpdate)(destroyUpdate);\n  }\n\n  const [ cleanup, subscribeToCleanup ] = createObservable();\n  const update = function ($parentUpdate) {\n    console.log({ $parentUpdate })\n    this && this();\n    console.log({ that: this })\n    // cancelUpdate = false; // clears cancel update\n    if ($parentUpdate) $parent = $parentUpdate;\n    const result = fn();\n    if (result !== resultCache) {\n      const [ element, updates, destroyUpdate ] = renderNode(result);\n      destroy();\n      destroyCache = destroyUpdate;\n      // updateDestroyer(destroyUpdate);\n      $parent && patch($parent, element, elementCache);\n      elementCache = element;\n      resultCache = result;\n      // updatesCache = updates;\n    }\n    updatesCache && updatesCache(); // this needs to go with new subscription system\n  };\n\n  // dispatcher.registerExpression(update, subscribeToCleanup)\n  // dispatcher.enderExpression(update)\n  update();\n\n  // const scheduleUpdate = () => {\n  //   if (!cancelUpdate) {\n  //     cancelUpdate = dispatcher.scheduleUpdate(update); // puts the update into the dispatcher queue and return a cancel handler\n  //   }\n  // };\n\n  // const instance = {\n  //   unsubscribe: subscribeToCleanup,\n    // unsubscribeList: [],\n  //   target: scheduleUpdate,\n  //   inProgress: true\n  // };\n\n  // dispatcher.render(instance);\n  // instance.inProgress = false;\n\n  return [ elementCache, update, destroyCache ];\n};\n\nconst createFragment = (vNodes) => {\n  const $elements = [];\n  const updates = [];\n  const destroyHandlers = [];\n  vNodes.forEach(vNode => {\n    // const [ $el ] = renderNode(vNode);\n    const [ $el, update, destroy ] = renderNode(vNode);\n    $elements.push($el);\n    update && updates.push(update);\n    destroy && destroyHandlers.push(destroy);\n  });\n\n  const update = ($parent) => {\n    updates.forEach(update => update($parent));\n  }\n\n  const destroy = () => {\n    updates.forEach(fn => fn());\n  }\n\n  return [ $elements, update, destroy ];\n}\n\nconst createElement = ({ tagName, attrs, children }) => {\n  const updates = [];\n  const destroyHandlers = [];\n\n  const $el = document.createElement(tagName);\n\n  if (attrs) {\n    if (typeof attrs === 'function') {\n\n    } else {\n      createAttrs(attrs, $el, updates)\n    }\n  }\n\n  if (children) {\n    for (const child of children) {\n      const [ element, update, destroyHandler ] = renderNode(child);\n      update && updates.push(update);\n      destroyHandler && destroyHandlers.push(destroyHandler);\n      // update && update($el);\n      patch($el, element);\n    }\n  }\n\n  const update = () => {\n    updates.forEach(update => update($el))\n  };\n\n  const destroy = () => {\n    destroyHandlers.forEach(fn => fn())\n  };\n\n  return [ $el, update, destroy ];\n}\n\nconst createComponent = ({ tagName: component, attrs, children }) => {\n  const unsubscribeList = [];\n  const [ updateObservableMessage, updateObservableSubscribe ] = createObservable();\n  const [ destroyObservableMessage, subscribeToDestroyOb ] = createObservable();\n\n  const destroy = () => {\n    unsubscribeList.forEach( d => d());\n    destroyObservableMessage();\n  };\n\n  // parentDestroy.subscribe()\n\n  const update = (...args) => {\n    updateDom(...args);\n    updateObservableMessage();\n  }\n\n  const connectState = (subscribe) => setTimeout(() => unsubscribeList.push(subscribe(update)));\n  const [ $el, updateDom ] = renderNode(component({\n    attrs,\n    children,\n    useEffect: useEffect.bind({\n      subscribeToUpdates: updateObservableSubscribe,\n      subscribeToDestroy: subscribeToDestroyOb\n    }),\n    useComputed: useComputed.bind(connectState),\n    // useValue: hook.bind(connectState, createValue),\n    // useState: hook.bind(connectState, createState)\n    useValue: useValue.bind(connectState),\n    useState: useState.bind(connectState),\n    useRef\n  }));\n\n  return [ $el, update, destroy ];\n}\n","import { createState } from './state/index';\r\nimport { renderNode } from './render';\r\nimport { patch } from './patch';\r\nimport { $and, $or, $if } from './extras';\r\n\r\nconst env = { isRenderMode: true }\r\n\r\nconst h = (tagName, attrs = {}, ...children) => {\r\n  return { tagName, attrs, children };\r\n};\r\n\r\nconst mount = (hdom, $target) => {\r\n  const [ $el, update ] = renderNode(hdom);\r\n  window.update = update;\r\n  patch($target, $el);\r\n}\r\n\r\nexport {\r\n  h,\r\n  mount,\r\n  $if,\r\n  $and,\r\n  $or\r\n}\r\n","import { h, mount, $and, $if, $or } from './framework';\r\n\r\nconst Wrapper = ({ children }) => {\r\n  console.log('Rendering <Wrapper />')\r\n  return (\r\n    <div style={() => ({ border: '4px solid #177fb6', padding: '20px' })}>\r\n      { children }\r\n    </div>\r\n  );\r\n};\r\n\r\nconst MaybeWrap = ({ children, attrs }) => {\r\n  return () => attrs.wrap() ? (\r\n    <div>{ children }</div>\r\n  ) : children\r\n};\r\n\r\nconst UxInput = ({\r\n  useValue,\r\n  attrs: { name, label, placeholder, oninput, type, ...rest }\r\n}) => {\r\n  const [ init, setInit ] = useValue(false)\r\n  const input = (e) => {\r\n    setInit(true)\r\n    console.log(init())\r\n    oninput(e);\r\n  }\r\n\r\n  console.log(\"Rendering <UxInput! />\")\r\n  return (\r\n    <div class=\"uxInput\">\r\n      <label for={ name }>{ label }</label>\r\n      <br />\r\n      <input\r\n        type={type || text}\r\n        placeholder={placeholder || ''}\r\n        name={name}\r\n        id={name}\r\n        oninput={oninput}\r\n        style={() => ({ background: init() ? '#eee' : '#fff'})}\r\n        {...rest}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Timer = ({ useValue, useComputed, useEffect }) => {\r\n  const [ counter, setCounter ] = useValue(0);\r\n  const increment = () => { setCounter(v => v + 1) };\r\n  const counterDisplay = useComputed({ counter }, ({ counter }) => {\r\n    const reversed = String(counter).split('').reverse().join('');\r\n    const sum = counter + Number(reversed);\r\n    return `${counter} | ${sum} | ${reversed}`;\r\n  });\r\n\r\n  const interval = setInterval(increment, 1000);\r\n\r\n  useEffect({ counter }, ({ counter }) => {\r\n    document.title = `You clicked ${counter} times`;\r\n  })\r\n\r\n  useEffect(false, () => {\r\n    console.log('START!!!')\r\n    return () => {\r\n      console.log('END!!!!')\r\n      document.title = 'Thank you for using Ryan Air!'\r\n      clearInterval(interval);\r\n    }\r\n  });\r\n\r\n  console.log(\"Rendering <Timer />\")\r\n\r\n  return (\r\n    <h2>{ counterDisplay }</h2>\r\n  );\r\n};\r\n\r\nconst Main = ({ attrs, useValue, useState, useEffect, useRef } = {}) => {\r\n  const inputRef = useRef();\r\n  console.log({ inputRef })\r\n  const [ state, updateState ] = useState({\r\n    name: '',\r\n    count: 0,\r\n    color: 'green',\r\n    showColors: true,\r\n  });\r\n\r\n  const [ shouldWrap, setWrap ] = useValue(false);\r\n\r\n  window.state = state;\r\n\r\n  // useEffect({\r\n  //   counter\r\n  // }, ({\r\n  //   counter\r\n  // }) => {\r\n  //   document.title = `You clicked ${counter} times`;\r\n  // });\r\n  //\r\n  const toggleColorOptions = (e) => state.showColors = e.target.checked;\r\n  const toggleWrapper = (e) => setWrap(v => !v);\r\n  const incrementClicks = () => {\r\n    inputRef().focus();\r\n    state.count++;\r\n  };\r\n  const updateName = (e) => state.name = e.target.value;\r\n  const selectColor = (e) => state.color = e.target.value;\r\n\r\n  var buttonStyle = () => ({\r\n    background: state.color,\r\n    color: 'white',\r\n    border: `5px solid ${state.color}`\r\n  });\r\n\r\n  console.log(\"Rendering <Main />\")\r\n\r\n  return (\r\n    <div>\r\n      <MaybeWrap wrap={shouldWrap}>\r\n        <UxInput\r\n          type=\"text\"\r\n          name=\"name\"\r\n          ref={inputRef}\r\n          label=\"Your name\"\r\n          value={() => state.name}\r\n          oninput={updateName}\r\n        />\r\n      </MaybeWrap>\r\n      <p>\r\n        Hello { () => state.name || 'John Doe' }! You have clicked { () => state.count } time{ () => state.count !== 1 ? 's' : ''} on the {() => state.color} button.\r\n      </p>\r\n      <button\r\n        style={buttonStyle}\r\n        onclick={incrementClicks}\r\n      > Increment! </button>\r\n      <p>\r\n      <label>\r\n        <input type=\"checkbox\" checked={shouldWrap} oninput={ toggleWrapper }/>\r\n        Should wrap\r\n      </label>\r\n        <label>\r\n          <input type=\"checkbox\" checked={() => state.showColors} oninput={ toggleColorOptions }/>\r\n          Show color options\r\n        </label>\r\n      </p>\r\n      <p>\r\n        { $if(() => state.showColors,\r\n          attrs.colors.map( color => <label>\r\n            <input\r\n              type=\"radio\"\r\n              value={color}\r\n              checked={() => color === state.color ? 'checked' : null}\r\n              name=\"color\"\r\n              id={color}\r\n              onchange={selectColor}\r\n            />\r\n            { color }\r\n          </label>\r\n        ), <Timer />) }\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n\r\n// const Test = () => {\r\n//   return [ ...Array(10000).keys() ].map( (x) => (\r\n//     <div>{ x }</div>\r\n//   ));\r\n// }\r\n\r\nconsole.time()\r\n\r\nmount(<Wrapper>\r\n  <Main colors={['red', 'orange', 'green', 'purple', 'black']} />\r\n</Wrapper>, document.body);\r\n// mount(<Test />, document.body);\r\nconsole.timeEnd()\r\n\r\n\r\nwindow.vnode = (\r\n  <div>\r\n    <h2>Dane</h2>\r\n    <p>motherfuckers</p>\r\n  </div>\r\n);\r\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else {\n        window.location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}